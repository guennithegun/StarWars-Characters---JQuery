var starwarsRepository=function(){var e=[],a="https://akabab.github.io/starwars-api/api/all.json";function n(a){e.push(a)}function t(){$("#modal-container").removeClass("is-visible")}function i(e){!function(e,a,n,i,o,s,r,p){var d=$("#modal-container");d.empty();var c=$('<div class="modal"></div>'),l=$('<div class="button-element"></div>'),u=$('<button class="modal-close">Close</button>');u.on("click",t);var m=$('<div class="image-container"></div>'),h=$('<img src="'+p+'" class="character-image">'),f=$("<h1>"+e+"<h1>"),v=$("<p>Mass: "+a+"</p>"),g=$("<p>Height: "+n+"</p>"),w=$("<p>Gender: "+i+"</p>"),b=$("<p>Homeworld: "+o+"</p>"),y=$("<p>Species: "+s+"</p>"),k=$("<p>More Details: </p>"),C=$('<a href="'+r+'" target="_blank">Here</a>');c.append(l),l.append(u),c.append(m),m.append(h),m.append(f),c.append(v),c.append(g),c.append(w),c.append(b),c.append(y),c.append(k),k.append(C),d.append(c),d.addClass("is-visible"),d.velocity("fadeIn",{duration:500})}(e.name,e.mass,e.height,e.gender,e.homeworld,e.species,e.more,e.img)}$(document).ready(function(){$("#searchInput").on("keyup",function(){var e=$(this).val().toLowerCase();$("#listOfCharacters li").filter(function(){$(this).toggle($(this).text().toLowerCase().indexOf(e)>-1)})})}),$(window).on("keydown",function(e){var a=$("#modal-container");"Escape"===e.key&&a.hasClass("is-visible")&&t()});var o=$("#modal-container");return o.on("click",function(e){$(e.target).is(o)&&t()}),{add:n,getAll:function(){return e},addListItem:function(e){var a=$("ul"),n=$("<li></li>"),t=$("<span>"+e.name+"</span>"),o=$("<button>+</button>");n.addClass("content__item"),o.addClass("content__item--button"),a.append(n),n.append(t),n.append(o),o.on("click",function(){i(e)}),o.on("click",function(){new Audio("files/lasrhit4.mp3").play()})},showDetails:i,loadList:function(){return $.ajax(a,{dataType:"json"}).then(function(e){e.forEach(function(e){n({name:e.name,mass:e.mass,height:e.height,gender:e.gender,homeworld:e.homeworld,species:e.species,more:e.wiki,img:e.image})})}).catch(function(e){console.error(e)})}}}();starwarsRepository.loadList().then(function(){starwarsRepository.getAll().forEach(function(e){starwarsRepository.addListItem(e)})});
